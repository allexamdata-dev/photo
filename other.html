<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>49KB Image ZIP (Odd Number Series)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{
padding:0;
margin:0;
}
@media (max-width: 600px) {
  body {
    padding:10px;
   
  }

  h2 {
    font-size:22px;
  }

  p {
    font-size:18px;
  }

  .container {
    padding:15px;
  }
}
body {
  font-family: Arial, sans-serif;
  background:#4f4a4a;
  padding:20px;

img{
  display:block;
  max-width:100px;
  width:100%;
  margin:20px auto;
  box-shadow:0 4px 15px rgba(0,0,0,0.1);
  border-radius:24px;
}

h2 {
  color:#06cc3b;
  text-align:center;
}
.container {
  background-color:#fff;
  max-width:500px;
  width:100%;
  padding:20px;
  margin:20px auto;
}
p{
  text-size:15px;
  text-align:center;
  color:#050806;
}


input, button {
  width:100%;
  padding:6px;
  margin-top:12px;
  border-radius:8px;
  border:1px solid #ccc;
}

button {
  background:green;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

button:hover {
  background:#090cba;
}

small {
  display:block;
  margin-top:10px;
  color:#666;
}

p,footer {
  text-align:center;
  margin-top:4px;
  position:relative;
}
#move{
margin:0px;
font-size:20px;
color:#b59400;
}
</style>
</head>

<body>
<img src="manas.jpeg" alt="logo">

<div class="container">
  <h2>WELCOME</h2>
  <P><b>SSC_PROJECT</P>
  <input type="file" id="fileInput" accept="image/*">

  <input type="text" id="baseName" value="900003_photo.jpg" placeholder="900003_photo.jpg">

  <input type="number" id="step" value="3" min="1" placeholder="Type '3' for (3,6,9.12..)Photos">

  <input type="number" id="count" value="" min="1" placeholder="How many photos">

  <button onclick="createZip()">Create ZIP</button>

 <small>
    • Type "900003_photo.jpg" in box.<br>
    • Supports all images<br>
    • All uotput images will reduce <49KB<br>
    • All Output format jpg<br>
 </small>
<nav>
   <p id="move"><b>MOVE TO : <a href="/www/ssc/other.html" alt=""otherhtmllink">Other-Project</a></p>
</nav>
</div>
<footer><small>copy right @2026 | Manas Debnath</small></footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
async function compressImage(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = () => {
      const img = new Image();
      img.src = reader.result;

      img.onload = async () => {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");

        /* SAFE resize for large images */
        const MAX = 1000;
        let w = img.width;
        let h = img.height;

        if (w > MAX || h > MAX) {
          const scale = Math.min(MAX / w, MAX / h);
          w = Math.floor(w * scale);
          h = Math.floor(h * scale);
        }

        canvas.width = w;
        canvas.height = h;
        ctx.drawImage(img, 0, 0, w, h);

        let quality = 0.8;
        let blob;

        while (quality > 0.05) {
          blob = await new Promise(r =>
            canvas.toBlob(r, "image/jpeg", quality)
          );
          if (blob.size <= 49 * 1024) break;
          quality -= 0.05;
        }

        if (blob.size > 49 * 1024) {
          alert("This image cannot be compressed to 49KB.");
          reject();
          return;
        }

        resolve(blob);
      };

      img.onerror = () => {
        alert("Unsupported image format.");
        reject();
      };
    };
  });
}

async function createZip() {
  const file = fileInput.files[0];
  if (!file) {
    alert("Please select an image");
    return;
  }

  const zip = new JSZip();

  const base = document.getElementById("baseName").value;
  const step = parseInt(document.getElementById("step").value);
  const count = parseInt(document.getElementById("count").value);

  if (!base.match(/\d+/)) {
    alert("Filename must contain a number");
    return;
  }

  const startNum = parseInt(base.match(/\d+/)[0]);
  const suffix = base.replace(startNum, "");

  const compressed = await compressImage(file);

  for (let i = 0; i < count; i++) {
    const num = startNum + (i * step);
    zip.file(num + suffix, compressed);
  }

  const zipBlob = await zip.generateAsync({ type:"blob" });

  const a = document.createElement("a");
  a.href = URL.createObjectURL(zipBlob);
  a.download = "BARCODE_MAINSERVER_IMAGE.zip";
  a.click();
}
</script>

</body>
</html>
